<h1><%= @the_user.username %></h1>


<% if @current_user.username == @url_username %>

<dt>Edit user</dt>

<form action="/user_update/<%=@the_user.id %>">
  <label for="updated_user_name">Username</label>
  <input id="updated_user_name" value="<%= @the_user.username %>" name="user_update">

  <button>Update user</button>
<% end %>
</form>
<dl>
  <dt>Private</dt>
  <% if @the_user.private && "false" %>
    <dd>true</dd>
  <% else %>
    <dd>false</dd>
  <dt>Followers</dt>
  <dd><%= @the_user.accepted_received_follow_requests.count %></dd>
  <dt>Following</dt>
  <dd><%= @the_user.accepted_sent_follow_requests.count %></dd>
</dl>
  <%end%>

<nav>
  <ul>
    <li>
      <a href="/users/<%= @the_user.username %>">Profile</a>
    </li>
    <li>
      <a href="/users/<%= @the_user.username %>/liked_photos">Liked photos</a>
    </li>
    <li>
      <a href="/users/<%= @the_user.username %>/feed">Feed</a>
    </li>
    <li>
      <a href="/users/<%= @the_user.username %>/discover">Discover</a>
    </li>
  </ul>
</nav>
<h2>Own photos (<%= @the_user.own_photos.count%>)</h2>

<table border="1">
<tr>
  <th>Image</th>
  <th>Owner </th>
  <th>Caption </th>
  <th>Posted </th>
  <th>Likes</th>
  <th></th>
</tr>

<% @the_user.own_photos.each do |a_photo| %>
<tr>
  <td><img src="<%= a_photo.image%>" </td>
   <%# <td> User.where({ :id => a_photo.owner_id}).at(0).username %>
  <td><%= a_photo.poster.username%> </td>
  <td><%= a_photo.caption%> </td>
  <td><%= time_ago_in_words(a_photo.created_at)%> </td>
  <td><%= a_photo.likes.count %></td>
  <td>
  <a href="/photos/<%= a_photo.id %>">Show details</a>
  </td>
</tr> 
<% end %>
</table>
